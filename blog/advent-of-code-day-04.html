<!DOCTYPE html>
<html lang="en-gb">

<head>
<script data-ad-client="ca-pub-1254309748341319" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "TechArticle",
        "headline": "Advent of Code Day 4",
        "datePublished": "2020-12-04",
        "author": {
          "@type": "Person",
          "name": "Joe Pitts",
          "additionalName": "David",
          "affiliation": "TrueNorthIT",
          "jobTitle": "Solutions Developer",
          "url": "https://JoePitts.co.uk",
          "sameAs": [
            "https://www.facebook.com/Joe.Pittsy",
            "https://www.linkedin.com/in/JoePittsy",
            "https://twitter.com/JoePittsy",
            "https://www.instagram.com/JoePittsy/",
            "https://github.com/JoePittsy"
          ]
        },
        "description": "Day Four of Advent of Code 2020!",
        "image": "https://joepitts.co.uk/resources/images/xmas/4.jpg"
   
      }
    </script>

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@JoePittsy" />
    <meta name="twitter:description" content="Day Four of Advent of Code 2020!" name="description" />
    <meta name="twitter:title" content="Joe Pitts | Advent of Code Day 4" />
    <meta name="twitter:creator" content="@JoePittsy" />
    <meta property="og:image" content="https://joepitts.co.uk/resources/images/xmas/4.jpg" />

    <meta property="og:title" content="Advent of Code Day 4" />
    <meta property="og:description" content="Day Four of Advent of Code 2020!" />
    <meta property="og:url" content="https://joepitts.co.uk/blog/advent-of-code-day-04.html" />
    <meta name="author" content="Joe Pitts" />

    <meta name="twitter:image" content="https://joepitts.co.uk/resources/images/xmas/4.jpg" />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-114382787-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag("js", new Date());
        gtag("config", "UA-114382787-2");
    </script>
    <script src="/js/darkMode.js" type="text/javascript"></script>
    <script src="/js/clipboard.min.js"></script>
    <link href="/resources/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180" />
    <link href="/resources/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" />
    <link href="/resources/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" />
    <link href="/resources/site.webmanifest" rel="manifest" />
    <link href="/resources/safari-pinned-tab.svg" rel="mask-icon" />
    <meta content="#da532c" name="msapplication-TileColor" />
    <meta content="#ffffff" name="theme-color" />
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>Joe Pitts | Advent of Code Day 4</title>
    <link href="/style.css" rel="stylesheet" type="text/css" />
    <meta content="Advent of Code Day 4!" name="description" />
    <meta lang="en-gb" />
    <noscript>
        <style>
            .jsonly {
                display: none
            }
        </style>
    </noscript>
</head>

<body link="black" style="height: auto;">
    <div class="content" id="content">
            <header>
      <div id="container">
        <div id="header">
          <img alt="Joe Pitts" id="logo" src="/resources/JoePitts.jpg" title="Joe Pitts" width="10%" />
          <!-- <a href="/" id="title">
                    <p>Joe Pitts</p>
                  </a> -->
          <nav id="normalMenu">
            <ul class="menu">
              <li>
                <a href="/">Home</a>
              </li>
              <li>
                <a href="/blog" id="currentPage">Blog</a>
              </li>
              <li>
                <a href="/work.html">My Work</a>
              </li>
              <li>
                <a href="/games/">Games</a>
              </li>
              <li id="darkItem">
                <img class="toggleDark" onclick="toggleNightMode()" src="/resources/moon.svg">
                <!-- <a class="toggleDark" onclick="toggleNightMode();">Dark Mode</a> -->
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </header>
        <hr />
        <div class="blogPost">
            <h1>Advent of Code: Day #04 - Passport Processing</h1>
            <span id="readingTime">
                <date>4th of December 2020</date> |
                <p>5-6 minutes</p>
            </span>
            <a class="anchor" href="#introduction">
                <h2 id="introduction">Introduction</h2>
            </a>
            <p>
                Today we need to write a passport validation system that accepts our North Pole credentials.
            </p>

            <a class="anchor" href="#one">
                <h2 id="one">Task One</h2>
            </a>
            <p>
                Each passport is represent by key:value pairs in the input data. A valid passport must have a birth
                year, issue year, expiration year, height, hair colour, passport ID and may, or may not, have a country
                ID.
            </p>
            <h3>Reading in the data</h3>
            <p>
                A new passports data begins after a new line and ends at the next so we add the line to a variable until
                we reach a new line. Once we have gathered all of the data we can use a dictionary and list
                comprehension
                to convert the input string into a Python dictionary. The input text file does not have a new line at
                the end,
                since we are using a new line as a signal that the data has ended this causes us to miss the last
                passport in the file. To fix this I just manually added the last passport outside of the loop.
            </p>

            <div class="codeSnippet">
                <div class="double-val-label">
                    <span class="python">Python</span>
                    <span data-clipboard-target="#getDataIn" id="dataCopy">Copy</span>
                </div>
                <pre><div id="getDataIn" style="color: #383a42; font-family: 'Fira Code', 'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback';font-weight: normal;font-size: 15px;line-height: 20px;white-space: pre;" spellcheck="false"><div><div><div><div><div><span style="color: #a626a4;">def</span><span style="color: #383a42;"> </span><span style="color: #4078f2;">read_data</span><span style="color: #383a42;">(</span><span style="color: #986801;">path</span><span style="color: #383a42;">):</span></div><div><span style="color: #383a42;">    passports = []</span></div><div><span style="color: #383a42;">    passport = </span><span style="color: #50a14f;">""</span></div><div><span style="color: #383a42;">    </span><span style="color: #a626a4;">with</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">open</span><span style="color: #383a42;">(path, </span><span style="color: #50a14f;">"r"</span><span style="color: #383a42;">) </span><span style="color: #a626a4;">as</span><span style="color: #383a42;"> </span><span style="color: #e45649;">file</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> line </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> </span><span style="color: #e45649;">file</span><span style="color: #383a42;">.readlines():</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">if</span><span style="color: #383a42;"> line.rstrip() != </span><span style="color: #50a14f;">""</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">                passport += </span><span style="color: #50a14f;">" "</span><span style="color: #383a42;"> + line.rstrip()</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">else</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">                tmp = passport.strip().split()</span></div><div><span style="color: #383a42;">                passports.append({key: value </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> (key, value)</span></div><div><span style="color: #383a42;"> </span><span style="color: #a626a4;">                                 in</span><span style="color: #383a42;"> [x.split(</span><span style="color: #50a14f;">":"</span><span style="color: #383a42;">) </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> x </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> tmp]})</span></div><div><span style="color: #383a42;">                passport = </span><span style="color: #50a14f;">""</span></div><div><span style="color: #383a42;">        </span><span style="color: #a0a1a7;font-style: italic;"># No new line at end of input so we manually add the last</span></div><div><span style="color: #a0a1a7;font-style: italic;">          passport out of the for loop</span></div><div><span style="color: #383a42;">        tmp = passport.strip().split()</span></div><div><span style="color: #383a42;">        passports.append({key: value </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> (key, value)</span></div><div><span style="color: #383a42;"> </span><span style="color: #a626a4;">                         in</span><span style="color: #383a42;"> [x.split(</span><span style="color: #50a14f;">":"</span><span style="color: #383a42;">) </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> x </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> tmp]})</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">return</span><span style="color: #383a42;"> passports</span></div></div></div></div></div></div></pre>
            </div>

            <h3>The Solution</h3>
            <p>
                Since we know that a valid passport must contain a birth year, issue year, expiration year, height, hair
                colour and passport ID but country ID is optional we can pop the country ID value from passports that
                have it then check how many values the passport has. If it has 7 values then it is valid.
            </p>
            <div class="codeSnippet">
                <div class="double-val-label">
                    <span class="python">Python</span>
                    <span data-clipboard-target="#getTaskOne" id="oneCopy">Copy</span>
                </div>
                <pre id="getTaskOne"
                    spellcheck="false"><div style="color: #383a42;font-family: 'Fira Code', 'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback';font-weight: normal;font-size: 15px;line-height: 20px;white-space: pre;" spellcheck="false"><div><div><span style="color: #a626a4;">def</span><span style="color: #383a42;"> </span><span style="color: #4078f2;">task_one</span><span style="color: #383a42;">(</span><span style="color: #986801;">passports</span><span style="color: #383a42;">):</span></div><div><span style="color: #383a42;">    valid = </span><span style="color: #986801;">0</span></div><div><span style="color: #383a42;">    </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> passport </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> passports:</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">try</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">            passport.pop(</span><span style="color: #50a14f;">"cid"</span><span style="color: #383a42;">)</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">except</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">KeyError</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">pass</span></div><div><span style="color: #383a42;">        valid += </span><span style="color: #986801;">1</span><span style="color: #383a42;"> </span><span style="color: #a626a4;">if</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">len</span><span style="color: #383a42;">(passport.keys()) == </span><span style="color: #986801;">7</span><span style="color: #383a42;"> </span><span style="color: #a626a4;">else</span><span style="color: #383a42;"> </span><span style="color: #986801;">0</span></div><div><span style="color: #383a42;">    </span><span style="color: #a626a4;">return</span><span style="color: #383a42;"> valid</span></div></div></div></pre>
            </div>

            <a class="anchor" href="#two">
                <h2 id="two">Task Two</h2>
            </a>
            <h3>The Solution</h3>
            <p>
                In task two we had to verify each field of the passport and ensure they met a certain criteria. To do
                this i first repeated the code from task 1 since passports still need 7 fields, from there I used a
                while loop to check each field. This way as soon as one is false we break straight away and don't have
                to bother checking the rest of the fields since all fields must be valid for the passport to be valid.
            </p>
            <div class="codeSnippet">
                <div class="double-val-label">
                    <span class="python">Python</span>
                    <span data-clipboard-target="#getTaskTwo" id="twoCopy">Copy</span>
                </div>
                <pre spellcheck="false" id="getTaskTwo"><div style="color: #383a42;font-family: 'Fira Code', 'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback';font-weight: normal;font-size: 15px;line-height: 20px;white-space: pre; " spellcheck="false"><div><div><span style="color: #a626a4;">def</span><span style="color: #383a42;"> </span><span style="color: #4078f2;">task_two</span><span style="color: #383a42;">(</span><span style="color: #986801;">passports</span><span style="color: #383a42;">):</span></div><div><span style="color: #383a42;">    valid = </span><span style="color: #986801;">0</span></div><div><span style="color: #383a42;">    </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> passport </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> passports:</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">try</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">            passport.pop(</span><span style="color: #50a14f;">"cid"</span><span style="color: #383a42;">)</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">except</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">KeyError</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">pass</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">if</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">len</span><span style="color: #383a42;">(passport.keys()) != </span><span style="color: #986801;">7</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">            </span><span style="color: #a0a1a7;font-style: italic;"># Still need all 7 to be valid</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">continue</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">else</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">            validity = </span><span style="color: #986801;">True</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">while</span><span style="color: #383a42;"> validity:</span></div><div><span style="color: #383a42;">                validity = validity </span><span style="color: #a626a4;">and</span><span style="color: #383a42;"> (</span><span style="color: #986801;">1920</span><span style="color: #383a42;"> &lt;= </span><span style="color: #0184bc;">int</span><span style="color: #383a42;">(passport[</span><span style="color: #50a14f;">"byr"</span><span style="color: #383a42;">]) &lt;= </span><span style="color: #986801;">2002</span><span style="color: #383a42;">)</span></div><div><span style="color: #383a42;">                validity = validity </span><span style="color: #a626a4;">and</span><span style="color: #383a42;"> (</span><span style="color: #986801;">2010</span><span style="color: #383a42;"> &lt;= </span><span style="color: #0184bc;">int</span><span style="color: #383a42;">(passport[</span><span style="color: #50a14f;">"iyr"</span><span style="color: #383a42;">]) &lt;= </span><span style="color: #986801;">2020</span><span style="color: #383a42;">)</span></div><div><span style="color: #383a42;">                validity = validity </span><span style="color: #a626a4;">and</span><span style="color: #383a42;"> (</span><span style="color: #986801;">2020</span><span style="color: #383a42;"> &lt;= </span><span style="color: #0184bc;">int</span><span style="color: #383a42;">(passport[</span><span style="color: #50a14f;">"eyr"</span><span style="color: #383a42;">]) &lt;= </span><span style="color: #986801;">2030</span><span style="color: #383a42;">)</span></div><div><span style="color: #383a42;">                validity = validity </span><span style="color: #a626a4;">and</span><span style="color: #383a42;"> (passport[</span><span style="color: #50a14f;">"hgt"</span><span style="color: #383a42;">][-</span><span style="color: #986801;">2</span><span style="color: #383a42;">:] == </span><span style="color: #50a14f;">"in"</span><span style="color: #383a42;"> </span><span style="color: #a626a4;">or</span><span style="color: #383a42;"> passport[</span><span style="color: #50a14f;">"hgt"</span><span style="color: #383a42;">][-</span><span style="color: #986801;">2</span><span style="color: #383a42;">:] == </span><span style="color: #50a14f;">"cm"</span><span style="color: #383a42;">)</span></div><div><span style="color: #383a42;">                validity = validity </span><span style="color: #a626a4;">and</span><span style="color: #383a42;"> (passport[</span><span style="color: #50a14f;">"hcl"</span><span style="color: #383a42;">][</span><span style="color: #986801;">0</span><span style="color: #383a42;">] == </span><span style="color: #50a14f;">"#"</span><span style="color: #383a42;"> </span><span style="color: #a626a4;">and</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">len</span><span style="color: #383a42;">(passport[</span><span style="color: #50a14f;">"hcl"</span><span style="color: #383a42;">]) == </span><span style="color: #986801;">7</span><span style="color: #383a42;">)</span></div><div><span style="color: #383a42;">                validity = validity </span><span style="color: #a626a4;">and</span><span style="color: #383a42;"> (passport[</span><span style="color: #50a14f;">"ecl"</span><span style="color: #383a42;">] </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> [</span><span style="color: #50a14f;">"amb"</span><span style="color: #383a42;">, </span><span style="color: #50a14f;">"blu"</span><span style="color: #383a42;">, </span><span style="color: #50a14f;">"brn"</span><span style="color: #383a42;">, </span><span style="color: #50a14f;">"gry"</span><span style="color: #383a42;">, </span><span style="color: #50a14f;">"grn"</span><span style="color: #383a42;">, </span><span style="color: #50a14f;">"hzl"</span><span style="color: #383a42;">, </span><span style="color: #50a14f;">"oth"</span><span style="color: #383a42;">])</span></div><div><span style="color: #383a42;">                validity = validity </span><span style="color: #a626a4;">and</span><span style="color: #383a42;"> (</span><span style="color: #0184bc;">len</span><span style="color: #383a42;">(passport[</span><span style="color: #50a14f;">"pid"</span><span style="color: #383a42;">]) == </span><span style="color: #986801;">9</span><span style="color: #383a42;">)</span></div><br><div><span style="color: #383a42;">                </span><span style="color: #a626a4;">if</span><span style="color: #383a42;"> passport[</span><span style="color: #50a14f;">"hgt"</span><span style="color: #383a42;">][-</span><span style="color: #986801;">2</span><span style="color: #383a42;">:] == </span><span style="color: #50a14f;">"in"</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">                    validity = (validity </span><span style="color: #a626a4;">and</span><span style="color: #383a42;"> </span><span style="color: #986801;">59</span><span style="color: #383a42;"> &lt;= </span><span style="color: #0184bc;">int</span><span style="color: #383a42;">(passport[</span><span style="color: #50a14f;">"hgt"</span><span style="color: #383a42;">][:-</span><span style="color: #986801;">2</span><span style="color: #383a42;">]) &lt;= </span><span style="color: #986801;">76</span><span style="color: #383a42;">)</span></div><div><span style="color: #383a42;">                </span><span style="color: #a626a4;">elif</span><span style="color: #383a42;"> passport[</span><span style="color: #50a14f;">"hgt"</span><span style="color: #383a42;">][-</span><span style="color: #986801;">2</span><span style="color: #383a42;">:] == </span><span style="color: #50a14f;">"cm"</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">                    validity = (validity </span><span style="color: #a626a4;">and</span><span style="color: #383a42;"> </span><span style="color: #986801;">150</span><span style="color: #383a42;"> &lt;= </span><span style="color: #0184bc;">int</span><span style="color: #383a42;">(passport[</span><span style="color: #50a14f;">"hgt"</span><span style="color: #383a42;">][:-</span><span style="color: #986801;">2</span><span style="color: #383a42;">]) &lt;= </span><span style="color: #986801;">193</span><span style="color: #383a42;">)</span></div><div><span style="color: #383a42;">                </span><span style="color: #a626a4;">break</span></div><div><span style="color: #383a42;">            valid += validity</span></div><div><span style="color: #383a42;">    </span><span style="color: #a626a4;">return</span><span style="color: #383a42;"> valid</span></div></div></div></pre>
                </div>

            <a class="anchor" href="#links">
                <h2 id="links">Links</h2>
            </a>
            <div class="download">
                <p><a href="https://adventofcode.com/2020/leaderboard/private">Leaderboard Code:</a>
                    <small>353270-1fc6ef28</small></p>
            </div>

            <div class="download">
                <p><a href="https://www.github.com/JoePittsy/AdventOfCode/">Github Repository</a>
                    <small>A link to the github repo containing all the days.</small></p>
            </div>
            <div class="download">
                <p><a href="https://raw.githubusercontent.com/JoePittsy/AdventOfCode/main/Day%2004/main.py"
                        download>main.py</a>
                    <small>A direct download of the main.py script</small></p>
                <p class="download__instructions">
                    <small class="download__properties">2.4<abbr title="Kilobytes">Kb</abbr></small>
                </p>
            </div>


        </div>
        <p></p>
        <div id="disqus_thread"></div>
        <script>
            (function () {
                // DON'T EDIT BELOW THIS LINEx
                var d = document,
                    s = d.createElement("script");
                s.src = "https://joepitts-co-uk.disqus.com/embed.js";
                s.setAttribute("data-timestamp", +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript>Please enable JavaScript to view the
            <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

<div class="footer">
    <ul class="footerContainer">
      <li>
        <p id="copyright">Copyright © 2018-2022, Joe Pitts. All rights reserved.</p>
      </li>
      <a href="https://www.linkedin.com/in/joepittsy"><img class="footerLogo" src="../resources/ln.svg"></a>
      <a href="https://github.com/JoePittsy">
        <li><img class="footerLogo" src="../resources/github.svg"></li>
      </a>
      <a href="https://twitter.com/JoePittsy">
        <li><img class="footerLogo" src="../resources/twitter.svg"></li>
      </a>
    </ul>

    <div class="mobileFooterContainer">
      <p id="copyright">Copyright © 2018-2022, Joe Pitts. All rights reserved.</p>
      <div class="mobileFooter">
        <a href="https://www.linkedin.com/in/joepittsy"><img class="footerLogo" src="../resources/ln.svg"></a>
        <a href="https://github.com/JoePittsy"><img class="footerLogo" src="../resources/github.svg"></a>
        <a href="https://twitter.com/JoePittsy"><img class="footerLogo" src="../resources/twitter.svg"></a>
      </div>
    </div>
    <script defer>
        (function () {
            new ClipboardJS("#dataCopy, #oneCopy, #twoCopy  ");
        })();
    </script>
</body>

</html>